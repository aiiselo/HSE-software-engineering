# Отчёт 

Лабораторная работа №4(3)  
Выполнила: Мартынюк Олеся   
Группа: 18ПИ-2   


### 1.    Придумать свою предметную область и продумать схему БД для неё.

В качестве предметной области выбрала хранение данных о книгах и издательствах, в которых они были выпущены. Правая таблица включает в себя ID книги, который генерируется автоматически, название книги, автора и название издательства, которое выпустило книгу. Левая таблица состоит из трех столбцов: название издательства, телефонный номер и дата последнего изменения в этой таблице. 

Схема БД: 

![schema](https://github.com/aiiselo/HSE-software-engineering/blob/master/2nd%20course/Database/Lab_3/screenshots/Дизайн%20без%20названия-3.png)

### 2.    Реализовать реляционную БД для своей предметной области (все таблицы должны быть не менее чем в третьей нормальной форме)

- DONE.

### 3.    Критерии к БД:
[1]     БД должна быть в третьей нормальной форме или выше;

- Данная БД представлена в третьей нормальной форме, так как авторы таблице с книгами не уникальны, ровно как и издательста книг (во второй таблице). 

[2]     Минимальное количество таблиц – 2;

- Моя база данных состоит из двух таблиц: таблица с книгами и таблица с издательствами.

[3]     Все подключения из GUI должны осуществляться выделенным, не root, пользователем;

- Я заранее создала пользователя myuser, который имеет доступ только к созданию базы данных. Подключаюсь к БД по localhost.

![usercreate](https://github.com/aiiselo/HSE-software-engineering/blob/master/2nd%20course/Database/Lab_3/screenshots/Снимок%20экрана%202020-06-06%20в%2004.07.17.png)

[4]     Должен существовать как минимум один индекс, созданный вами по выбранному текстовому не ключевому полю;

- В качестве индекса я выбрала автора книги. Если ввести в поле поиска автора или часть его имени, можно найти информацию о книгах, которые были выпущены автором, и издательства, в которых они были выпущены. Удалить же можно только книги, выпущенные этим автором (издательства не удаляются). Индекс объявлялся вот так: 

```sql
create index if not exists author on "Book" (author);
```

[5]     В одной из таблиц должно присутствовать поле, заполняемое/изменяемое только триггером (например, «общая стоимость бронирования» в таблице «бронирования», которое автоматически высчитывается при добавлении/изменении/удалении билетов, входящих в это бронирование)

- Триггером заполнялось и изменялось поле lastUpdate в таблице издательств. Триггер был объявлен следующим образом: 
```sql
drop trigger if exists trigger_update on "Publisher";

create trigger trigger_update before update on "Publisher" 
    for row execute procedure update_time();
```

### 4.    Реализовать программу GUI со следующим функционалом:

[1]     Создание базы данных (важно(!) именно create database, а не только create table)
[2]     Удаление базы данных
[3]     Вывод содержимого таблиц
[4]     Очистка(частичная - одной, и полная - всех) таблиц
[5]     Добавление новых данных
[6]     Поиск по заранее выбранному (вами) текстовому не ключевому полю
[7]     Обновление кортежа
[8]     Удаление по заранее выбранному текстовому не ключевому полю
[9]     Удаление конкретной записи, выбранной пользователем
[10]     Все функции должны быть реализованы как хранимые процедуры. 

 - Из GUI вызываются только хранимые функции. 
 
 ### 5. Структура проекта: 
 
 - commands.sql (здесь хранятся хранимые функции)
 - connectWindow.py (код дизайна стартового окна)
 - connectWindow.ui (код дизайна стартового окна)
 - design.py (код дизайна основного окна)
 - design.ui (код дизайна основного окна)
 - database.py (класс в бд, подключение к ней и вызов хранимых функций)
 - gui.ui (реализация гуи)
 - main.py (запуск проекта)
 
 ### 6. Вид приложения:
 
 Стартовое окно (открывается при Cmd+O)

![startWindow](https://github.com/aiiselo/HSE-software-engineering/blob/master/2nd%20course/Database/Lab_3/screenshots/Снимок%20экрана%202020-06-06%20в%2004.23.18.png)

Основное окно (открывается после введения имени бд)

![defaultWindow](https://github.com/aiiselo/HSE-software-engineering/blob/master/2nd%20course/Database/Lab_3/screenshots/Снимок%20экрана%202020-06-06%20в%2004.23.28.png)

### 7. Демонтрация работы: 

[Перейти к просмотру видео с демонстрацией работы](https://youtu.be/Gz5Ij_Zs_i8)
